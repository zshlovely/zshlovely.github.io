
<!DOCTYPE html>
<html lang="zh-CN">


<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#202020"/>
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>
  
  
    <meta name="keywords" content="Git," />
  

  
    <meta name="description" content="既然选择远方，便只顾风雨兼程" />
  
  
  <link rel="icon" type="image/x-icon" href="/logo.png">
  <title>Git操作手册 [ shaohua&#39;s blog ]</title>
  
    <!-- stylesheets list from config.yml -->
    
      <link rel="stylesheet" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css">
    
      <link rel="stylesheet" href="/css/xoxo.css">
    
  
<meta name="generator" content="Hexo 6.2.0"></head>


<body>
  <div class="nav-container">
    <nav class="home-menu pure-menu pure-menu-horizontal">
  <a class="pure-menu-heading" href="/">
    <img class="avatar" src="/images/logo.png">
    <span class="title">shaohua&#39;s blog</span>
  </a>

  <ul class="pure-menu-list clearfix">
      
          
            <li class="pure-menu-item"><a href="/" class="pure-menu-link">首页</a></li>
          
      
          
            <li class="pure-menu-item"><a href="/archives" class="pure-menu-link">归档</a></li>
          
      
          
            <li class="pure-menu-item"><a href="/tags" class="pure-menu-link">标签</a></li>
          
      
          
            <li class="pure-menu-item"><a href="/categories" class="pure-menu-link">分类</a></li>
          
      
          
            <li class="pure-menu-item"><a href="/search" class="pure-menu-link">搜索</a></li>
          
      
          
            <li class="pure-menu-item"><a href="/about" class="pure-menu-link">关于</a></li>
          
      
  </ul>
   
</nav>
  </div>

  <div class="container" id="content-outer">
    <div class="inner" id="content-inner">
      <div class="post-container">
  <article class="post" id="post">
    <header class="post-header text-center">
      <h1 class="title">
        Git操作手册
      </h1>
      <span>
        
        <time class="time" datetime="2019-12-17T17:10:20.000Z">
        2019-12-18
      </time>
        
      </span>
      <span class="slash">/</span>
      <span class="post-meta">
      <span class="post-tags">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Git/" rel="tag">Git</a></li></ul>
      </span>
    </span>
      <span class="slash">/</span>
      <span class="read">
      <span id="busuanzi_value_page_pv"></span> 点击
    </span>
      <span class="slash">/</span>
      <span class="read">阅读耗时 23 分钟</span>
    </header>

    <div class="post-content">
      <h1 id="Git基础"><a href="#Git基础" class="headerlink" title="Git基础"></a>Git基础</h1><h2 id="git一些参数解释"><a href="#git一些参数解释" class="headerlink" title="git一些参数解释"></a>git一些参数解释</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">//git中一些选项解释:</span><br><span class="line"></span><br><span class="line">-d</span><br><span class="line">--delete：删除</span><br><span class="line"></span><br><span class="line">-D</span><br><span class="line">--delete --force的快捷键</span><br><span class="line"></span><br><span class="line">-f</span><br><span class="line">--force：强制</span><br><span class="line"></span><br><span class="line">-m</span><br><span class="line">--move：移动或重命名</span><br><span class="line"></span><br><span class="line">-M</span><br><span class="line">--move --force的快捷键</span><br><span class="line"></span><br><span class="line">-r</span><br><span class="line">--remote：远程</span><br><span class="line"></span><br><span class="line">-a</span><br><span class="line">--all：所有</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>附：官方中文文档<br><a target="_blank" rel="noopener" href="https://git-scm.com/book/zh/v2/%E8%B5%B7%E6%AD%A5-%E5%85%B3%E4%BA%8E%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6">https://git-scm.com/book/zh/v2/%E8%B5%B7%E6%AD%A5-%E5%85%B3%E4%BA%8E%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6</a></p>
<h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br><span class="line">git remote add origin git@git.hypers.com:hadoop/insight.git   //添加远程库</span><br><span class="line"></span><br><span class="line">Unknown SSL protocol error in connection to xxx:443</span><br><span class="line">git config --global http.proxy 127.0.0.1:7890</span><br><span class="line">git config --global http.sslVerify false</span><br><span class="line"></span><br><span class="line">拉取分支到本地</span><br><span class="line">git pull origin dev-1.2.0</span><br><span class="line">git pull origin release-1.2.1</span><br><span class="line"></span><br><span class="line">切换分支操作：</span><br><span class="line">查看所有</span><br><span class="line">git branch -a</span><br><span class="line">查看当前</span><br><span class="line">git branch</span><br><span class="line">切换分支</span><br><span class="line">git checkout dev-1.2.0</span><br><span class="line">拉远程仓库所有分支、指定分支</span><br><span class="line">git fetch origin [branch]</span><br><span class="line"></span><br><span class="line">拉远程仓库指定分支，并合并</span><br><span class="line">git pull origin &lt;branch&gt;</span><br></pre></td></tr></table></figure>



<h2 id="git-fetch-amp-git-pull"><a href="#git-fetch-amp-git-pull" class="headerlink" title="git fetch &amp; git pull"></a>git fetch &amp; git pull</h2><p>git fetch 是将远程主机的最新内容拉到本地，并未合并。</p>
<p>git pull 是 将远程主机的最新内容拉下来后直接合并。即：<code>git pull = git fetch + git merge</code> 但是这样可能会冲突。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git fetch:</span><br><span class="line">git fetch origin(远程主机名)	   全部更新取回本地,</span><br><span class="line">git fetch origin dev(分支名)	取回特定分支</span><br><span class="line">git log -p FETCH_HEAD   	  取回更新后，会返回一个FETCH_HEAD，可以查看取回的更新信息</span><br><span class="line">git merge FETCH_HEAD    	  将拉取下来的最新内容合并到当前所在的分支中</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git pull:</span><br><span class="line">git pull &lt;远程主机名&gt; &lt;远程分支名&gt;:&lt;本地分支名&gt;</span><br><span class="line">git pull origin dev  如果拉取某个分支并且与当前分支合并，可以：以及后面的</span><br></pre></td></tr></table></figure>



<h2 id="git-push"><a href="#git-push" class="headerlink" title="git push"></a>git push</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">如果当前分支只有一个远程分支，那么主机名都可以省略，形如 git push.</span><br><span class="line"></span><br><span class="line">常用命令：</span><br><span class="line">git push -u origin dev  如果当前分支与多个主机存在追踪关系，则可以使用 -u 参数指定一个默认主机，这样后面就可以不加任何参数使用git push</span><br><span class="line"></span><br><span class="line">git push --all origin   不管是否存在对应的远程分支，将本地的所有分支都推送到远程主机.</span><br><span class="line">git push --force origin git push  如果本地版本库比远程服务器上的低，强制push。不建议使用</span><br><span class="line">git push origin --tags   git push 的时候不会推送标签，如果一定要推送标签的话那么可以使用这个命令</span><br><span class="line"></span><br><span class="line">一般使用</span><br><span class="line">git push origin dev(分支名)</span><br></pre></td></tr></table></figure>



<h2 id="git-branch"><a href="#git-branch" class="headerlink" title="git branch"></a>git branch</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">常用命令</span><br><span class="line">git remote update origin --prune  //更新远程分支列表</span><br><span class="line"></span><br><span class="line">git branch //查看本地所有分支 </span><br><span class="line"></span><br><span class="line">git branch -r //查看远程所有分支</span><br><span class="line"></span><br><span class="line">git branch -a //查看本地和远程的所有分支</span><br><span class="line"></span><br><span class="line">git branch &lt;branchname&gt; //新建分支</span><br><span class="line"></span><br><span class="line">git branch -d &lt;branchname&gt; //删除本地分支</span><br><span class="line"></span><br><span class="line">git branch -d -r &lt;branchname&gt; //删除远程分支，删除后还需推送到服务器</span><br><span class="line">git push origin:&lt;branchname&gt;  //删除后推送至服务器</span><br><span class="line">git push origin --delete &lt;branchname&gt;  //直接删除远程分支  一步到位</span><br><span class="line"></span><br><span class="line">git branch -m &lt;oldbranch&gt; &lt;newbranch&gt; //重命名本地分支</span><br></pre></td></tr></table></figure>



<h2 id="git-tag"><a href="#git-tag" class="headerlink" title="git tag"></a>git tag</h2><p>tag 和 branch的区别：</p>
<p>tag就像是一个里程碑，branch是新的一条线。稳定版本备份用tag，新功能多人开发用branch（开发完成后merge到master）。tag的本质就是给commit的 hash校验和 取的一个名字，比较直观，方便记忆和使用。</p>
<p>tag分两类：轻量标签，附注标签</p>
<ul>
<li><p>轻量标签很像一个不会改变的分支——它只是某个特定提交的引用。</p>
</li>
<li><p>附注标签是存储在 Git 数据库中的一个完整对象。包括打标签者的名字、电子邮件地址、日期时间， 此外还有一个标签信息等。</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">git tag [-l]   列出已有的标签</span><br><span class="line">git tag -l &quot;v1.8.5*&quot;    模糊查询</span><br><span class="line">git checkout v2.0   切换到该标签，查看文件。注：这会使你的仓库处于“分离头指针（detached HEAD）”的状态</span><br><span class="line">	在“分离头指针”状态下，你的新提交将不属于任何分支，并且将无法访问（除非给定hash）</span><br><span class="line">	在该标签下，如果要修复bug，通常基于标签新建一个分支：git checkout -b dev1.3 v2.0</span><br><span class="line">	这之后的提交就会在新分支。</span><br><span class="line">	总之：基于标签的check out 不要做任何修改。</span><br><span class="line"></span><br><span class="line">附注标签：</span><br><span class="line">git tag -a v1.4 -m &quot;my version 1.4&quot;   标签版本v1.4</span><br><span class="line">git show v1.4   可以看到标签信息和与之对应的提交信息。</span><br><span class="line"></span><br><span class="line">轻量标签：</span><br><span class="line">git tag v1.4.1   轻量标签v1.4.1</span><br><span class="line">git show v1.4.1  只会显示提交信息</span><br><span class="line"></span><br><span class="line">删除标签：</span><br><span class="line">git tag -d tagname  这个只会删除本地标签</span><br><span class="line">	git push &lt;remote&gt; :refs/tags/&lt;tagname&gt;  使用该命令更新变成仓库</span><br><span class="line">	如git push origin :refs/tags/v1.4.1</span><br><span class="line">git push origin --delete &lt;tagname&gt;   本地和远程都删除。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">后期打标签：对过去的提交打标签</span><br><span class="line">git log --pretty=oneline</span><br><span class="line">git tag -a v1.2 9fceb02（提交的校验和）</span><br><span class="line"></span><br><span class="line">共享标签：</span><br><span class="line">git push并不会推送 tag, 如果想共享标签可以使用： git push origin &lt;tagname&gt;</span><br><span class="line">共享全部标签：git push origin --tags</span><br></pre></td></tr></table></figure>



<h2 id="git-merge"><a href="#git-merge" class="headerlink" title="git merge"></a>git merge</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">dev分支 merge到 master：</span><br><span class="line">git checkout master</span><br><span class="line">git pull origin master</span><br><span class="line">#--no-ff：不使用fast-forward方式合并，保留分支的commit历史</span><br><span class="line">git merge --no-ff dev</span><br><span class="line">git status</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">如果合并失败，想要一键回滚到合并前：</span><br><span class="line">git reset --merge</span><br></pre></td></tr></table></figure>



<h2 id="git-remote"><a href="#git-remote" class="headerlink" title="git remote"></a>git remote</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">git remote -v	//显示所有远程仓库信息： 远程主机名(如origin) 地址</span><br><span class="line">git remote add [shortname] [url]	//添加远程版本库,shortname即远程主机名（如origin）</span><br><span class="line">git remote prune origin  //刷新本地仓库, 与远程仓库的保持同步. 即删除本地有但在远程库已经不存在的分支</span><br><span class="line">git remote update origin --prune   //更新远程分支列表</span><br><span class="line"></span><br><span class="line">git remote rm name  # 删除远程仓库</span><br><span class="line">git remote rename old_name new_name  # 修改仓库名</span><br></pre></td></tr></table></figure>



<h2 id="git-reset"><a href="#git-reset" class="headerlink" title="git reset"></a>git reset</h2><p>使用场景：有时候，进行了错误的提交，但是还没有push到远程分支，想要撤销本次提交，可以使用git reset –-soft&#x2F;hard命令。</p>
<p>二者区别：</p>
<ul>
<li>git reset –-soft：回退到某个版本，只回退了commit的信息，不会恢复到index file一级。如果还要提交，直接commit即可；</li>
<li>git reset -–hard：彻底回退到某个版本，本地的源码也会变为上一个版本的内容，撤销的commit中所包含的更改被冲掉；</li>
</ul>
<p>使用过程：</p>
<ul>
<li>git status</li>
<li>git log  &#x2F;    git log –oneline</li>
<li>git reset –-soft 回退版本号（注意别少回退了，上次版本之前的版本）</li>
<li>git reset –hard origin&#x2F;dev-1.3.0 放弃本地修改，与远程仓库保持一致</li>
</ul>
<h2 id="git-stash"><a href="#git-stash" class="headerlink" title="git stash"></a>git stash</h2><p>使用场景：当切换分支的时候，如果有未提交的变更记录，此时系统会阻止你切换分支，解决方法有两种。</p>
<ol>
<li>commit后，git checkout 分支名</li>
<li>git stash 将数据存到缓存，再切换分支。等修改完毕后，git stash apply切换回来</li>
</ol>
<p>git stash 适用场景：</p>
<ol>
<li>有一个类，想删掉他，但又怕以后会用到。考虑使用git stash</li>
<li>在分支1改了代码，但这时分支2有需要修改的地方。常规操作：提交分支1的变更到本地仓库，切换到分支2然后修改，完成后再切回分支1. 这样会留下不必要的提交记录<br>如果不想提交完成一半的代码，却不得不切换分支。使用git stash</li>
</ol>
<p>命令集：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">git stash list 查看stash缓存;</span><br><span class="line"></span><br><span class="line">git stash save ‘msg’  缓存当前分支;</span><br><span class="line"></span><br><span class="line">git stash pop stash@&#123;id&#125;    将缓存堆栈中的第一个stash删除，并将对应修改应用到当前的工作目录下;</span><br><span class="line"></span><br><span class="line">git stash apply stash@&#123;id&#125;  将缓存堆栈中的stash 应用到工作目录中，但并不删除stash;</span><br><span class="line"></span><br><span class="line">git stash drop [stash@&#123;id&#125;]  删除指定缓存, 如果不加stash编号，默认的就是删除最新的，也就是编号为0的那个;</span><br><span class="line"></span><br><span class="line">git stash clear  清空缓存;</span><br><span class="line"></span><br><span class="line">--查看指定stash的diff</span><br><span class="line"></span><br><span class="line">git stash show 查看第一个;</span><br><span class="line"></span><br><span class="line">git stash show stash@&#123;id&#125; 查看指点stash;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">特别的：</span><br><span class="line">默认情况下，git stash会缓存下列文件：  添加到暂存区的修改（staged changes）即已经add的文件，   Git跟踪的但并未添加到暂存区的修改（unstaged changes）</span><br><span class="line">			不会缓存一下文件：在工作目录中新的文件（untracked files），  被忽略的文件（ignored files）即.gitignore忽略的文件</span><br><span class="line"></span><br><span class="line">git stash save -u name  可以stash untracked文件</span><br><span class="line">git stash save -a name  可以stash当前目录下的所有修改。</span><br></pre></td></tr></table></figure>

<h2 id="git-commit"><a href="#git-commit" class="headerlink" title="git commit"></a>git commit</h2><p>git commit -m ‘desc’<br>使用场景：提交变更</p>
<p>git commit –amend –no-edit<br>使用场景：上次提交之后，发现漏了点东西。但是你又不想有提交两次记录。即本次修改追加到上次修改，但是不变动commit message<br>git commit –amend -m ‘new desc’<br>本次修改追加到上次修改，并修改commit message</p>
<h2 id="基础命令"><a href="#基础命令" class="headerlink" title="基础命令"></a>基础命令</h2><p>git add [file1] [file2] …<br>git add [dir]<br>git add .<br>分别将单文件，目录以及当前目录下所有文件 添加到 暂存区</p>
<p>git commit -m [message]<br>将暂存区所有信息提交到本地仓库</p>
<p>git commit [file1] [file2] … -m [message]</p>
<h2 id="关于-refs-x2F-for"><a href="#关于-refs-x2F-for" class="headerlink" title="关于 refs&#x2F;for"></a>关于 refs&#x2F;for</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">refs/for 的意义在于我们提交代码到服务器之后是需要经过code review 之后才能进行merge的，而refs/heads 不需要</span><br></pre></td></tr></table></figure>



<h2 id="关于git提交格式"><a href="#关于git提交格式" class="headerlink" title="关于git提交格式"></a>关于git提交格式</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>



<h1 id="Git-Flow"><a href="#Git-Flow" class="headerlink" title="Git Flow"></a>Git Flow</h1><h2 id="1-Git-Flow常用分支"><a href="#1-Git-Flow常用分支" class="headerlink" title="1. Git Flow常用分支"></a>1. Git Flow常用分支</h2><h3 id="1-Master-分支"><a href="#1-Master-分支" class="headerlink" title="1. Master 分支"></a>1. Master 分支</h3><p>这个分支是最近发布到生产环境的代码，即最近发布的Release， 这个分支只能从其他分支合并，不能在这个分支直接修改。</p>
<h3 id="2-Dev-分支"><a href="#2-Dev-分支" class="headerlink" title="2. Dev 分支"></a>2. Dev 分支</h3><p>这个分支是我们是我们的主开发分支，包含所有要发布到下一个Release的代码，以及合并其他分支，比如Feature分支。</p>
<h3 id="3-Feature-分支"><a href="#3-Feature-分支" class="headerlink" title="3. Feature 分支"></a>3. Feature 分支</h3><p> 这个分支主要是用来开发一个新的功能，一旦开发完成，我们会 合并回 Develop分支，并进入下一个Release。</p>
<h3 id="4-Release-分支"><a href="#4-Release-分支" class="headerlink" title="4. Release 分支"></a>4. Release 分支</h3><p>发布一个新Release的时候，我们基于Develop分支创建一个Release分支，完成Release后，我们合并到Master和Develop分支</p>
<h3 id="5-Hotfix-分支"><a href="#5-Hotfix-分支" class="headerlink" title="5. Hotfix 分支"></a>5. Hotfix 分支</h3><p>已发布的版本发现新的bug的时候，我们需要创建一个Hotfix, 完成Hotfix后，我们合并回Master和Develop分支，所以Hotfix的改动会进入下一个Release</p>
<p>– 以上是对于 Gitflow 的简单总结，但是如果对于 hac 这种 toB的 产品， 各个客户有不同版本，多个版本需要同时维护的时候，需要考虑下这种场景是否适用。</p>
<h2 id="2-Git-Flow-如何使用"><a href="#2-Git-Flow-如何使用" class="headerlink" title="2. Git Flow 如何使用"></a>2. Git Flow 如何使用</h2><h3 id="1-Master-和-Dev-分支"><a href="#1-Master-和-Dev-分支" class="headerlink" title="1. Master 和 Dev 分支"></a>1. Master 和 Dev 分支</h3><p>所有在Master分支上的Commit应该打上Tag，一般情况下Master不存在Commit，Devlop分支基于Master分支创建</p>
<p> <img src="/../../../../images/20220805-12.png" alt="img"></p>
<h3 id="2-Feature-分支"><a href="#2-Feature-分支" class="headerlink" title="2. Feature 分支"></a>2. Feature 分支</h3><p>Feature分支做完后，必须合并回Develop分支, 合并完分支后一般会删点这个Feature分支。</p>
<p><img src="/../../../../images/20220805-13.png" alt="img"></p>
<h3 id="3-Release-分支"><a href="#3-Release-分支" class="headerlink" title="3. Release 分支"></a>3. Release 分支</h3><p>Release分支 基于 Develop分支 创建，打完Release分支之后，我们可以在这个Release分支上测试，修改Bug等。同时，其它开发人员可以基于Develop分支新建Feature  (记住：一旦打了Release分支之后不要从Develop分支上合并新的改动到Release分支) 发布Release分支时，合并Release到Master和Develop， 同时在Master分支上打个Tag记住Release版本号，然后删除Release分支。</p>
<p><img src="/../../../../images/20220805-14.png" alt="img"></p>
<h3 id="4-Hotfix分支"><a href="#4-Hotfix分支" class="headerlink" title="4. Hotfix分支"></a>4. Hotfix分支</h3><p>hotfix分支 基于 Master分支 创建，开发完后需要合并回Master和Develop分支，同时在Master上打一个tag。</p>
<p><img src="/../../../../images/20220805-15.png" alt="img"></p>
<h2 id="3-Git-Flow-命令示例"><a href="#3-Git-Flow-命令示例" class="headerlink" title="3. Git Flow 命令示例"></a>3. Git Flow 命令示例</h2><h3 id="1-创建-Dev"><a href="#1-创建-Dev" class="headerlink" title="1. 创建 Dev"></a>1. 创建 Dev</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git branch dev </span><br><span class="line">git push -u origin dev</span><br></pre></td></tr></table></figure>

<h3 id="2-开始-Feature"><a href="#2-开始-Feature" class="headerlink" title="2. 开始 Feature"></a>2. 开始 Feature</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 通过dev新建feaeure分支</span><br><span class="line">git checkout -b feature dev</span><br><span class="line"># 或者, 推送至远程服务器:</span><br><span class="line">git push -u origin feature    </span><br><span class="line"></span><br><span class="line"># 修改md文件   </span><br><span class="line">git status</span><br><span class="line">git add .</span><br><span class="line">git commit    </span><br></pre></td></tr></table></figure>

<h3 id="3-完成-Feature-合并其代码到dev"><a href="#3-完成-Feature-合并其代码到dev" class="headerlink" title="3. 完成 Feature, 合并其代码到dev"></a>3. 完成 Feature, 合并其代码到dev</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">git pull origin dev</span><br><span class="line">git checkout dev</span><br><span class="line"></span><br><span class="line">#--no-ff：不使用fast-forward方式合并，保留分支的commit历史</span><br><span class="line">#--squash：使用squash方式合并，把多次分支commit历史压缩为一次</span><br><span class="line"></span><br><span class="line">git merge --no-ff feature</span><br><span class="line">git push origin develop</span><br><span class="line"></span><br><span class="line">git branch -d feature</span><br><span class="line"></span><br><span class="line"># 如果需要删除远程feature分支:</span><br><span class="line">git push origin --delete feature   </span><br></pre></td></tr></table></figure>

<h3 id="4-开始-Release"><a href="#4-开始-Release" class="headerlink" title="4. 开始 Release"></a>4. 开始 Release</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">---基于dev分支，新建release分支 </span><br><span class="line">git checkout -b release-0.1.0 dev</span><br></pre></td></tr></table></figure>

<h3 id="5-完成-Release"><a href="#5-完成-Release" class="headerlink" title="5. 完成 Release"></a>5. 完成 Release</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">--合并release 到 master</span><br><span class="line">git checkout master</span><br><span class="line">git merge --no-ff release-0.1.0</span><br><span class="line">git push</span><br><span class="line"></span><br><span class="line">--合并release 到 dev</span><br><span class="line">git checkout dev</span><br><span class="line">git merge --no-ff release-0.1.0</span><br><span class="line">git push</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">git branch -d release-0.1.0</span><br><span class="line">git push origin --delete release-0.1.0   </span><br><span class="line"></span><br><span class="line"># 合并master/dev分支之后，打上tag </span><br><span class="line">git tag -a v0.1.0 master</span><br><span class="line">git push --tags</span><br></pre></td></tr></table></figure>

<h3 id="6-开始-Hotfix"><a href="#6-开始-Hotfix" class="headerlink" title="6. 开始 Hotfix"></a>6. 开始 Hotfix</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b hotfix-0.1.1 master  </span><br></pre></td></tr></table></figure>

<h3 id="7-完成-Hotfix"><a href="#7-完成-Hotfix" class="headerlink" title="7. 完成 Hotfix"></a>7. 完成 Hotfix</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">git checkout master</span><br><span class="line">git merge --no-ff hotfix-0.1.1</span><br><span class="line">git push</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">git checkout develop</span><br><span class="line">git merge --no-ff hotfix-0.1.1</span><br><span class="line">git push</span><br><span class="line"></span><br><span class="line">git branch -d hotfix-0.1.1</span><br><span class="line">git push origin --delete  hotfix-0.1.1 </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">git tag -a v0.1.1 master</span><br><span class="line">git push --tags</span><br></pre></td></tr></table></figure>


    </div>

    <div></div>
  </article>
  <div class="toc-container">
    
  <div id="toc" class="toc-article">
    <strong class="toc-title">目录</strong>
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Git%E5%9F%BA%E7%A1%80"><span class="toc-text">Git基础</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#git%E4%B8%80%E4%BA%9B%E5%8F%82%E6%95%B0%E8%A7%A3%E9%87%8A"><span class="toc-text">git一些参数解释</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-text">常用命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#git-fetch-amp-git-pull"><span class="toc-text">git fetch &amp; git pull</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#git-push"><span class="toc-text">git push</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#git-branch"><span class="toc-text">git branch</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#git-tag"><span class="toc-text">git tag</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#git-merge"><span class="toc-text">git merge</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#git-remote"><span class="toc-text">git remote</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#git-reset"><span class="toc-text">git reset</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#git-stash"><span class="toc-text">git stash</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#git-commit"><span class="toc-text">git commit</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4"><span class="toc-text">基础命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E-refs-x2F-for"><span class="toc-text">关于 refs&#x2F;for</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E4%BA%8Egit%E6%8F%90%E4%BA%A4%E6%A0%BC%E5%BC%8F"><span class="toc-text">关于git提交格式</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Git-Flow"><span class="toc-text">Git Flow</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Git-Flow%E5%B8%B8%E7%94%A8%E5%88%86%E6%94%AF"><span class="toc-text">1. Git Flow常用分支</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Master-%E5%88%86%E6%94%AF"><span class="toc-text">1. Master 分支</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Dev-%E5%88%86%E6%94%AF"><span class="toc-text">2. Dev 分支</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Feature-%E5%88%86%E6%94%AF"><span class="toc-text">3. Feature 分支</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-Release-%E5%88%86%E6%94%AF"><span class="toc-text">4. Release 分支</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-Hotfix-%E5%88%86%E6%94%AF"><span class="toc-text">5. Hotfix 分支</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Git-Flow-%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8"><span class="toc-text">2. Git Flow 如何使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Master-%E5%92%8C-Dev-%E5%88%86%E6%94%AF"><span class="toc-text">1. Master 和 Dev 分支</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Feature-%E5%88%86%E6%94%AF"><span class="toc-text">2. Feature 分支</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Release-%E5%88%86%E6%94%AF"><span class="toc-text">3. Release 分支</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-Hotfix%E5%88%86%E6%94%AF"><span class="toc-text">4. Hotfix分支</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-Git-Flow-%E5%91%BD%E4%BB%A4%E7%A4%BA%E4%BE%8B"><span class="toc-text">3. Git Flow 命令示例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BA-Dev"><span class="toc-text">1. 创建 Dev</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%BC%80%E5%A7%8B-Feature"><span class="toc-text">2. 开始 Feature</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%AE%8C%E6%88%90-Feature-%E5%90%88%E5%B9%B6%E5%85%B6%E4%BB%A3%E7%A0%81%E5%88%B0dev"><span class="toc-text">3. 完成 Feature, 合并其代码到dev</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%BC%80%E5%A7%8B-Release"><span class="toc-text">4. 开始 Release</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%AE%8C%E6%88%90-Release"><span class="toc-text">5. 完成 Release</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E5%BC%80%E5%A7%8B-Hotfix"><span class="toc-text">6. 开始 Hotfix</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E5%AE%8C%E6%88%90-Hotfix"><span class="toc-text">7. 完成 Hotfix</span></a></li></ol></li></ol></li></ol>
  </div>


  </div>
</div>
<div class="copyright">
    <span>本作品采用</span>
    <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by/4.0/">知识共享署名 4.0 国际许可协议</a>
    <span>进行许可。 转载时请注明原文链接。</span>
</div>
<div class="share" style="width: 100%;">
  <img src="/../../../../images/wechat.png" alt="Running Geek" style="margin: auto; display: block;"/>

  <div style="margin: auto; text-align: center; font-size: 0.8em; color: grey;">微信扫一扫向我投食</div>
  
</div>

  
    <div class="post-nav">
      <div class="post-nav-item post-nav-next">
        
          <span>〈 </span>
          <a href="/2019/12/15/Spark/Spark-RDD&amp;SQL/" rel="next" title="Spark-RDD&amp;SQL">
          Spark-RDD&amp;SQL
          </a>
        
      </div>
  
      <div class="post-nav-item post-nav-prev">
          
          <a href="/2020/03/12/Docker%E6%89%8B%E5%86%8C/" rel="prev" title="Docker手册">
            Docker手册
          </a>
          <span>〉</span>
        
      </div>
    </div>
  


    </div>

    

  </div>
  <footer class="footer text-center">
    <div id="bottom-inner">
        <a class="bottom-item" target="_blank" rel="noopener" href="https://zshlovely.github.io/">首页</a> |
        <a class="bottom-item" href="https://zshlovely.github.io/" target="_blank">主站</a> |
        <a class="bottom-item" href="https://github.com/fenghuayangyi" target="_blank">GitHub</a>
    </div>
</footer>
  

<script>
  (function(window, document, undefined) {

    var timer = null;

    function returnTop() {
      cancelAnimationFrame(timer);
      timer = requestAnimationFrame(function fn() {
        var oTop = document.body.scrollTop || document.documentElement.scrollTop;
        if (oTop > 0) {
          document.body.scrollTop = document.documentElement.scrollTop = oTop - 50;
          timer = requestAnimationFrame(fn);
        } else {
          cancelAnimationFrame(timer);
        }
      });
    }

    var hearts = [];
    window.requestAnimationFrame = (function() {
      return window.requestAnimationFrame ||
        window.webkitRequestAnimationFrame ||
        window.mozRequestAnimationFrame ||
        window.oRequestAnimationFrame ||
        window.msRequestAnimationFrame ||
        function(callback) {
          setTimeout(callback, 1000 / 60);
        }
    })();
    init();

    function init() {
      css(".heart{z-index:9999;width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);}.heart:after,.heart:before{content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: absolute;}.heart:after{top: -5px;}.heart:before{left: -5px;}");
      attachEvent();
      gameloop();
      addMenuEvent();
    }

    function gameloop() {
      for (var i = 0; i < hearts.length; i++) {
        if (hearts[i].alpha <= 0) {
          document.body.removeChild(hearts[i].el);
          hearts.splice(i, 1);
          continue;
        }
        hearts[i].y--;
        hearts[i].scale += 0.004;
        hearts[i].alpha -= 0.013;
        hearts[i].el.style.cssText = "left:" + hearts[i].x + "px;top:" + hearts[i].y + "px;opacity:" + hearts[i].alpha + ";transform:scale(" + hearts[i].scale + "," + hearts[i].scale + ") rotate(45deg);background:" + hearts[i].color;
      }
      requestAnimationFrame(gameloop);
    }

    /**
     * 给logo设置点击事件
     * 
     * - 回到顶部
     * - 出现爱心
     */
    function attachEvent() {
      var old = typeof window.onclick === "function" && window.onclick;
      var logo = document.getElementById("logo");
      if (logo) {
        logo.onclick = function(event) {
          returnTop();
          old && old();
          createHeart(event);
        }
      }
      
    }

    function createHeart(event) {
      var d = document.createElement("div");
      d.className = "heart";
      hearts.push({
        el: d,
        x: event.clientX - 5,
        y: event.clientY - 5,
        scale: 1,
        alpha: 1,
        color: randomColor()
      });
      document.body.appendChild(d);
    }

    function css(css) {
      var style = document.createElement("style");
      style.type = "text/css";
      try {
        style.appendChild(document.createTextNode(css));
      } catch (ex) {
        style.styleSheet.cssText = css;
      }
      document.getElementsByTagName('head')[0].appendChild(style);
    }

    function randomColor() {
      // return "rgb(" + (~~(Math.random() * 255)) + "," + (~~(Math.random() * 255)) + "," + (~~(Math.random() * 255)) + ")";
      return "#F44336";
    }

    function addMenuEvent() {
      var menu = document.getElementById('menu-main-post');
      if (menu) {
        var toc = document.getElementById('toc');
        if (toc) {
          menu.onclick = function() {
            if (toc) {
              if (toc.style.display == 'block') {
                toc.style.display = 'none';
              } else {
                toc.style.display = 'block';
              }
            }
          };
        } else {
          menu.style.display = 'none';
        }
      }
    }

  })(window, document);
</script>

  



</body>
</html>
